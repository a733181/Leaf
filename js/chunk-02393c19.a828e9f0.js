(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02393c19"],{"2d5c":function(e,t,r){"use strict";r("acf2")},acf2:function(e,t,r){},bd82:function(e,t,r){"use strict";r.r(t);var c=r("7a23"),n=Object(c["l"])("刪除所有訂單");function a(e,t,r,a,i,s){var o=Object(c["R"])("BaseBtn"),l=Object(c["R"])("OrderList"),u=Object(c["R"])("DeleteOrderCheck"),b=Object(c["R"])("BaseDialog");return Object(c["I"])(),Object(c["h"])(c["a"],null,[Object(c["m"])(o,{"red-outline":"",class:"block mb-2 ml-auto",onClick:s.toggleIsDeleteOrder},{default:Object(c["fb"])((function(){return[n]})),_:1},8,["onClick"]),Object(c["m"])(l),Object(c["m"])(b,{show:i.isDeleteOrder,onClose:s.toggleIsDeleteOrder,title:"刪除全部訂單"},{default:Object(c["fb"])((function(){return[Object(c["m"])(u,{onClose:s.toggleIsDeleteOrder},null,8,["onClose"])]})),_:1},8,["show","onClose"])],64)}var i=r("1da1"),s=(r("96cf"),r("4e82"),r("b0c0"),r("0292")),o=r.n(s),l=r("fe3b"),u=r.n(l),b={class:"flex items-center justify-between"},d=Object(c["i"])("h2",{class:"mb-2 text-2xl font-extrabold"},"訂單列表",-1),O={class:"flex"},j={class:"mr-1"},p=Object(c["l"])(" 總共有 "),f=Object(c["l"])(" 筆訂單 / "),m=Object(c["l"])(" 本頁有 "),h=Object(c["l"])(" 筆訂單 "),g={class:"block w-full mb-3 overflow-x-auto whitespace-nowrap lg:text-center lg:table"},y={class:"border-b-2 border-black"},w=Object(c["l"])(" 訂單編號 "),k={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},x=Object(c["l"])(" 姓名 "),v={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},C=Object(c["l"])(" 地址 "),D={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},I=Object(c["l"])(" 電話 "),_={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},T=Object(c["l"])(" 成立時間 "),S={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},U=Object(c["l"])(" 是否付款 "),L={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},P=Object(c["l"])(" 付款時間 "),R={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},B=Object(c["i"])("th",{class:"p-2"},"商品明細",-1),$=Object(c["l"])(" 總金額 "),E={key:1,src:u.a,alt:"minimize",class:"w-[8px] inline"},z=Object(c["i"])("th",{class:"p-2"},"變更 / 刪除",-1),V={class:"p-2"},A={class:"p-2"},F={class:"p-2"},J={class:"p-2"},M={class:"p-2"},q=Object(c["l"])("明細"),N=Object(c["l"])("變更"),Z=Object(c["l"])("刪除");function Y(e,t,r,n,a,i){var s=Object(c["R"])("BaseBtn"),l=Object(c["R"])("OrderEdit"),u=Object(c["R"])("BaseDialog"),Y=Object(c["R"])("ProductList"),H=Object(c["R"])("DeleteOrderCheck"),G=Object(c["R"])("BasePagination");return Object(c["I"])(),Object(c["h"])(c["a"],null,[Object(c["i"])("div",b,[d,Object(c["i"])("ul",O,[Object(c["i"])("li",j,[Object(c["i"])("p",null,[p,Object(c["i"])("span",null,Object(c["U"])(a.orderLength),1),f])]),Object(c["i"])("li",null,[Object(c["i"])("p",null,[m,Object(c["i"])("span",null,Object(c["U"])(i.orderData.length),1),h])])])]),Object(c["i"])("table",g,[Object(c["i"])("thead",null,[Object(c["i"])("tr",y,[Object(c["i"])("th",{class:"p-2",onClick:t[0]||(t[0]=function(e){return i.sort("id")})},[w,"id"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"id"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",k)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[1]||(t[1]=function(e){return i.sort("name")})},[x,"name"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"name"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",v)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[2]||(t[2]=function(e){return i.sort("address")})},[C,"address"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"address"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",D)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[3]||(t[3]=function(e){return i.sort("tel")})},[I,"tel"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"tel"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",_)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[4]||(t[4]=function(e){return i.sort("create_at")})},[T,"create_at"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"create_at"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",S)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[5]||(t[5]=function(e){return i.sort("is_paid")})},[U,"is_paid"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"is_paid"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",L)):Object(c["g"])("",!0)]),Object(c["i"])("th",{class:"p-2",onClick:t[6]||(t[6]=function(e){return i.sort("paid_date")})},[P,"paid_date"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"paid_date"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",R)):Object(c["g"])("",!0)]),B,Object(c["i"])("th",{class:"p-2",onClick:t[7]||(t[7]=function(e){return i.sort("total")})},[$,"total"===a.sortType?(Object(c["I"])(),Object(c["h"])("img",{key:0,src:o.a,alt:"arrow",class:Object(c["x"])(["w-[8px] inline",{" rotate-180":a.toSort}])},null,2)):Object(c["g"])("",!0),"total"!==a.sortType?(Object(c["I"])(),Object(c["h"])("img",E)):Object(c["g"])("",!0)]),z])]),Object(c["i"])("tbody",null,[(Object(c["I"])(!0),Object(c["h"])(c["a"],null,Object(c["P"])(i.orderData,(function(e){return Object(c["I"])(),Object(c["h"])("tr",{key:e.id,class:"border-b-2"},[Object(c["i"])("td",V,Object(c["U"])(e.id),1),Object(c["i"])("td",A,Object(c["U"])(e.user.name),1),Object(c["i"])("td",F,Object(c["U"])(e.user.address),1),Object(c["i"])("td",J,Object(c["U"])(e.user.tel),1),Object(c["i"])("td",null,Object(c["U"])(i.changeDate(e.create_at)),1),Object(c["i"])("td",{class:Object(c["x"])({"text-red-600":!e.is_paid})},Object(c["U"])(e.is_paid?"已付款":"未付款"),3),Object(c["i"])("td",null,Object(c["U"])(i.changeDate(e.paid_date)),1),Object(c["i"])("td",M,[Object(c["m"])(s,{onClick:function(t){return i.tryShowProductList(e.products)}},{default:Object(c["fb"])((function(){return[q]})),_:2},1032,["onClick"])]),Object(c["i"])("td",null,Object(c["U"])(Math.round(e.total)),1),Object(c["i"])("td",null,[Object(c["m"])(s,{outline:"",class:"mr-2",onClick:function(t){return i.editOrder(e)}},{default:Object(c["fb"])((function(){return[N]})),_:2},1032,["onClick"]),Object(c["m"])(s,{"red-outline":"",onClick:function(t){return i.tryDeleteOrder(e.id)}},{default:Object(c["fb"])((function(){return[Z]})),_:2},1032,["onClick"])])])})),128))])]),Object(c["m"])(u,{show:a.isEditOrder,productModel:"",title:"變更訂單狀態",onClose:i.toggleIsEditOrder},{default:Object(c["fb"])((function(){return[Object(c["m"])(l,{onClose:i.toggleIsEditOrder},null,8,["onClose"])]})),_:1},8,["show","onClose"]),Object(c["m"])(u,{show:a.showProductList,title:"商品明細",onClose:i.toggleShowProductList,productModel:""},{default:Object(c["fb"])((function(){return[Object(c["m"])(Y,{products:a.productList},null,8,["products"])]})),_:1},8,["show","onClose"]),Object(c["m"])(u,{show:a.isDeleteOrder,title:"刪除訂單",onClose:i.toggleIsDeleteOrder},{default:Object(c["fb"])((function(){return[Object(c["m"])(H,{onClose:i.toggleIsDeleteOrder},null,8,["onClose"])]})),_:1},8,["show","onClose"]),Object(c["m"])(G)],64)}r("fb6a"),r("d81d"),r("4fad");var H={class:"block w-full overflow-y-auto text-center max-h-[500px] whitespace-nowrap"},G=Object(c["i"])("thead",null,[Object(c["i"])("tr",{class:"border-b-2"},[Object(c["i"])("th",{class:"w-1/3"},"商品名稱"),Object(c["i"])("th",{class:"w-1/6"},"單價"),Object(c["i"])("th",{class:"w-1/6"},"數量"),Object(c["i"])("th",{class:"w-1/6"},"小計")])],-1),K={class:"flex flex-col items-center py-3 lg:flex-row"},Q=["src","alt"],W=Object(c["i"])("td",null,null,-1),X=Object(c["i"])("td",null,null,-1),ee=Object(c["i"])("td",null,null,-1),te={class:"pt-2"};function re(e,t,r,n,a,i){return Object(c["I"])(),Object(c["h"])("table",H,[G,Object(c["i"])("tbody",null,[(Object(c["I"])(!0),Object(c["h"])(c["a"],null,Object(c["P"])(r.products,(function(e){return Object(c["I"])(),Object(c["h"])("tr",{key:e.id,class:"border-b-[1px]"},[Object(c["i"])("td",K,[Object(c["i"])("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-[100px] mb-2 lg:mb-0 lg:mr-6 object-cover"},null,8,Q),Object(c["i"])("p",null,Object(c["U"])(e.product.title),1)]),Object(c["i"])("td",null,Object(c["U"])(e.product.price),1),Object(c["i"])("td",null,Object(c["U"])(e.qty),1),Object(c["i"])("td",null,Object(c["U"])(e.final_total),1)])})),128)),Object(c["i"])("tr",null,[W,X,ee,Object(c["i"])("td",null,[Object(c["i"])("p",te,Object(c["U"])(i.sumsPriceTotal),1)])])])])}r("d3b7");var ce={props:{products:{type:Array,required:!0}},computed:{sumsPriceTotal:function(){return this.products?this.products.reduce((function(e,t){var r=e+t.final_total;return r}),0):0}}},ne=r("d959"),ae=r.n(ne);const ie=ae()(ce,[["render",re]]);var se=ie,oe=function(e){return Object(c["L"])("data-v-ad1f21ce"),e=e(),Object(c["J"])(),e},le={class:"flex items-center mb-4"},ue=oe((function(){return Object(c["i"])("h2",{class:"mr-2 text-lg"},"訂單編號：",-1)})),be={class:"mb-3"},de=oe((function(){return Object(c["i"])("label",{for:"name",class:"mb-2"},"姓名：",-1)})),Oe={class:"mb-3"},je=oe((function(){return Object(c["i"])("label",{for:"phone"},"電話：",-1)})),pe={class:"mb-3"},fe=oe((function(){return Object(c["i"])("label",{for:"email"},"Email：",-1)})),me={class:"mb-3"},he=oe((function(){return Object(c["i"])("label",{for:"address"},"地址：",-1)})),ge={class:"mb-3"},ye=oe((function(){return Object(c["i"])("label",{for:"message"},"留言：",-1)})),we={class:"mb-3"},ke=oe((function(){return Object(c["i"])("label",{for:"isPaid",class:"mr-3"},"是否付款",-1)})),xe=["checked"],ve={class:"mb-6"},Ce=oe((function(){return Object(c["i"])("label",{for:"due_date",class:"mb-1"},"付款日",-1)})),De={class:"flex justify-between gap-4"},Ie=Object(c["l"])("取消"),_e=Object(c["l"])("送出");function Te(e,t,r,n,a,i){var s=Object(c["R"])("Datepicker"),o=Object(c["R"])("BaseBtn");return Object(c["I"])(),Object(c["h"])(c["a"],null,[Object(c["i"])("div",le,[ue,Object(c["i"])("p",null,Object(c["U"])(a.data.id),1)]),Object(c["i"])("form",{action:"",onSubmit:t[12]||(t[12]=Object(c["ib"])((function(){return i.editOrderFrom&&i.editOrderFrom.apply(i,arguments)}),["prevent"]))},[Object(c["i"])("div",be,[de,Object(c["gb"])(Object(c["i"])("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.data.user.name=e}),class:Object(c["x"])(["border-gray-400 input",i.errorClass("name")]),onBlur:t[1]||(t[1]=function(e){return a.errorType=""})},null,34),[[c["ab"],a.data.user.name]])]),Object(c["i"])("div",Oe,[je,Object(c["gb"])(Object(c["i"])("input",{type:"tel",id:"phone","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.data.user.tel=e}),class:Object(c["x"])(["border-gray-400 input",i.errorClass("phone")]),onBlur:t[3]||(t[3]=function(e){return a.errorType=""})},null,34),[[c["ab"],a.data.user.tel]])]),Object(c["i"])("div",pe,[fe,Object(c["gb"])(Object(c["i"])("input",{type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.data.user.email=e}),class:Object(c["x"])(["border-gray-400 input",i.errorClass("email")]),onBlur:t[5]||(t[5]=function(e){return a.errorType=""})},null,34),[[c["ab"],a.data.user.email]])]),Object(c["i"])("div",me,[he,Object(c["gb"])(Object(c["i"])("input",{type:"text",id:"address","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.data.user.address=e}),class:Object(c["x"])(["border-gray-400 input",i.errorClass("address")]),onBlur:t[7]||(t[7]=function(e){return a.errorType=""})},null,34),[[c["ab"],a.data.user.address]])]),Object(c["i"])("div",ge,[ye,Object(c["gb"])(Object(c["i"])("input",{type:"text",id:"message","onUpdate:modelValue":t[8]||(t[8]=function(e){return a.data.message=e}),class:Object(c["x"])(["border-gray-400 input",i.errorClass("message")]),onBlur:t[9]||(t[9]=function(e){return a.errorType=""})},null,34),[[c["ab"],a.data.message]])]),Object(c["i"])("div",we,[ke,Object(c["gb"])(Object(c["i"])("input",{type:"checkbox",id:"isPaid","onUpdate:modelValue":t[10]||(t[10]=function(e){return a.data.is_paid=e}),checked:a.data.is_paid},null,8,xe),[[c["Y"],a.data.is_paid]])]),Object(c["i"])("div",ve,[Ce,Object(c["m"])(s,{modelValue:a.date,"onUpdate:modelValue":t[11]||(t[11]=function(e){return a.date=e}),autoApply:"",format:i.formatDate,required:a.data.is_paid},null,8,["modelValue","format","required"])]),Object(c["i"])("div",De,[Object(c["m"])(o,{"red-outline":"",class:"w-1/2",onClick:i.close},{default:Object(c["fb"])((function(){return[Ie]})),_:1},8,["onClick"]),Object(c["m"])(o,{type:"submit",class:"w-1/2"},{default:Object(c["fb"])((function(){return[_e]})),_:1})])],32)],64)}r("ac1f"),r("00b4"),r("99af"),r("e9c4");var Se=r("ef2e"),Ue=(r("dfc8"),{emits:["close"],components:{Datepicker:Se["a"]},data:function(){return{data:{},errorType:"",date:null}},methods:{close:function(){this.$emit("close")},editOrderFrom:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.errorType="",""!==e.data.user.name){t.next=4;break}return e.errorType="name",t.abrupt("return");case 4:if(e.phoneNumber(e.data.user.tel)){t.next=7;break}return e.errorType="phone",t.abrupt("return");case 7:if(e.email(e.data.user.email)){t.next=10;break}return e.errorType="email",t.abrupt("return");case 10:if(!(""===e.data.user.address||e.data.user.address.length<6)){t.next=13;break}return e.errorType="address",t.abrupt("return");case 13:return r=Date.parse(e.date)/1e3,e.data.paid_date=r,t.next=17,e.$store.dispatch("backstageOrder/editOrder",e.data);case 17:e.close();case 18:case"end":return t.stop()}}),t)})))()},phoneNumber:function(e){var t=/^(09)[0-9]{8}$/;return t.test(e)},email:function(e){var t=/^([a-zA-Z0-9_.\-+])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)},errorClass:function(e){return this.errorType===e?"border-red-400":"border-gray-400"},formatDate:function(e){var t=e.getDate(),r=e.getMonth()+1,c=e.getFullYear(),n=e.getHours(),a=e.getMinutes();return" ".concat(c,"/").concat(r<10?"0".concat(r):r,"/").concat(t," ").concat(n<10?"0".concat(n):n,":").concat(a<10?"0".concat(a):a)}},created:function(){var e=this.$store.getters["backstageOrder/editOrderData"];this.data=JSON.parse(JSON.stringify(e));var t=new Date(1e3*this.data.paid_date);this.date=t}});r("2d5c");const Le=ae()(Ue,[["render",Te],["__scopeId","data-v-ad1f21ce"]]);var Pe=Le,Re=Object(c["i"])("p",{class:"mb-2 text-2xl"},"確定要刪除訂單？ 刪除後無法回復",-1),Be={class:"flex"},$e=Object(c["l"])("否"),Ee=Object(c["l"])("是");function ze(e,t,r,n,a,i){var s=Object(c["R"])("BaseBtn");return Object(c["I"])(),Object(c["h"])(c["a"],null,[Re,Object(c["i"])("div",Be,[Object(c["m"])(s,{class:"w-full mr-2",outline:"",onClick:i.close},{default:Object(c["fb"])((function(){return[$e]})),_:1},8,["onClick"]),Object(c["m"])(s,{class:"w-full","red-outline":"",onClick:i.deleteOrder},{default:Object(c["fb"])((function(){return[Ee]})),_:1},8,["onClick"])])],64)}var Ve={emits:["close"],methods:{close:function(){this.$emit("close")},deleteOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("backstageOrder/deleteOrder");case 2:e.close();case 3:case"end":return t.stop()}}),t)})))()}}};const Ae=ae()(Ve,[["render",ze]]);var Fe=Ae,Je={components:{ProductList:se,OrderEdit:Pe,DeleteOrderCheck:Fe},props:{},emits:["delete-order","edit-order-data"],data:function(){return{sortType:"id",toSort:!1,isEditOrder:!1,showProductList:!1,productList:[],orderLength:"",isDeleteOrder:!1}},computed:{countPageData:function(){var e=this.$store.getters["pagination/currentPage"],t=this.$store.getters["pagination/backstageShowItem"],r=(e-1)*t,c=e*t;return{start:r,end:c}},orderData:function(){var e,t=this,r=null!==(e=this.$store.getters["backstageOrder/orderData"])&&void 0!==e?e:[];this.countOrderItem(r);var c=r.sort((function(e,r){var c=t.sortType;if("name"===c||"tel"===c||"address"===c){if(e.user[c]>r.user[c])return t.toSort?-1:1;if(e.user[c]<r.user[c])return t.toSort?1:-1}else{if(e[c]>r[c])return t.toSort?-1:1;if(e[c]<r[c])return t.toSort?1:-1}return 0})),n=c.slice(this.countPageData.start,this.countPageData.end);return n}},methods:{changeDate:function(e){if(e){var t={day:"numeric",month:"numeric",year:"numeric"},r=new Intl.DateTimeFormat(t).format(1e3*e);return r}return""},countOrderItem:function(e){this.orderLength=e.length},sort:function(e){this.toSort=!this.toSort,this.sortType=e},tryShowProductList:function(e){var t=Object.entries(e).map((function(e){return e[1]}));this.productList=t,this.toggleShowProductList()},editOrder:function(e){this.$store.dispatch("backstageOrder/getEditOrder",e),this.toggleIsEditOrder()},tryDeleteOrder:function(e){this.$store.dispatch("backstageOrder/getDeleteOrder",e),this.toggleIsDeleteOrder()},toggleShowProductList:function(){this.showProductList=!this.showProductList},toggleIsEditOrder:function(){this.isEditOrder=!this.isEditOrder},toggleIsDeleteOrder:function(){this.isDeleteOrder=!this.isDeleteOrder}}};r("ff17");const Me=ae()(Je,[["render",Y]]);var qe=Me,Ne={components:{OrderList:qe,DeleteOrderCheck:Fe},data:function(){return{isDeleteOrder:!1}},methods:{getOrder:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("loading/isLoading",!0),t.next=3,e.$store.dispatch("backstageOrder/getOrder");case 3:e.$store.dispatch("loading/isLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},toggleIsDeleteOrder:function(){this.isDeleteOrder=!this.isDeleteOrder}},mounted:function(){this.getOrder()}};const Ze=ae()(Ne,[["render",a]]);t["default"]=Ze},e3dc:function(e,t,r){},ff17:function(e,t,r){"use strict";r("e3dc")}}]);
//# sourceMappingURL=chunk-02393c19.a828e9f0.js.map